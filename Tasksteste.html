<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-4" />
  <title>Lista de Tasks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    body {
      min-height: 100vh;
      background: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .app {
      background: #ffffff;
      width: 100%;
      max-width: 480px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      padding: 20px 20px 16px;
    }

    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .app-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .app-counter {
      font-size: 0.85rem;
      color: #666;
    }

    .task-form {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }

    .task-form input[type="text"] {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 0.95rem;
      outline: none;
      transition: border 0.2s, box-shadow 0.2s;
    }

    .task-form input[type="text"]:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.15);
    }

    .task-form button {
      border: none;
      background: #2563eb;
      color: #fff;
      padding: 10px 14px;
      border-radius: 10px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      transition: background 0.2s, transform 0.1s;
    }

    .task-form button:hover {
      background: #1d4ed8;
    }

    .task-form button:active {
      transform: scale(0.97);
    }

    .filters {
      display: flex;
      gap: 6px;
      margin-bottom: 12px;
      font-size: 0.85rem;
    }

    .filters button {
      flex: 1;
      border-radius: 999px;
      border: 1px solid #ddd;
      padding: 6px 0;
      background: #f9fafb;
      cursor: pointer;
      transition: background 0.2s, border-color 0.2s;
    }

    .filters button.active {
      background: #2563eb;
      border-color: #2563eb;
      color: #fff;
    }

    .task-list {
      list-style: none;
      max-height: 320px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .task-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 6px;
      border-radius: 10px;
      transition: background 0.15s;
    }

    .task-item:hover {
      background: #f3f4f6;
    }

    .task-checkbox {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .task-text {
      flex: 1;
      font-size: 0.95rem;
      word-break: break-word;
    }

    .task-text.done {
      text-decoration: line-through;
      color: #9ca3af;
    }

    .task-actions {
      display: flex;
      gap: 4px;
    }

    .task-actions button {
      border: none;
      background: transparent;
      cursor: pointer;
      padding: 4px;
      font-size: 0.8rem;
      border-radius: 6px;
      color: #6b7280;
    }

    .task-actions button:hover {
      background: #e5e7eb;
    }

    .empty-state {
      text-align: center;
      padding: 20px 8px 8px;
      font-size: 0.9rem;
      color: #9ca3af;
    }

    .footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 8px;
    }

    .clear-btn {
      border: none;
      background: transparent;
      font-size: 0.8rem;
      color: #ef4444;
      cursor: pointer;
      padding: 4px 0;
    }

    .clear-btn:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="app-title">Minhas Tasks</div>
      <div class="app-counter" id="task-counter">0 pendente(s)</div>
    </header>

    <form class="task-form" id="task-form">
      <input
        type="text"
        id="task-input"
        placeholder="Digite uma nova task e aperte Enter..."
        autocomplete="off"
      />
      <button type="submit">Adicionar</button>
    </form>

    <div class="filters">
      <button type="button" data-filter="all" class="active">Todas</button>
      <button type="button" data-filter="pending">Pendentes</button>
      <button type="button" data-filter="done">Concluídas</button>
    </div>

    <ul class="task-list" id="task-list"></ul>
    <div class="empty-state" id="empty-state">Nenhuma task ainda. Comece adicionando uma.</div>

    <div class="footer">
      <button class="clear-btn" id="clear-done-btn">Limpar concluídas</button>
    </div>
  </div>

  <script>
    // Referências dos elementos
    const taskForm = document.getElementById("task-form");
    const taskInput = document.getElementById("task-input");
    const taskList = document.getElementById("task-list");
    const taskCounter = document.getElementById("task-counter");
    const emptyState = document.getElementById("empty-state");
    const filterButtons = document.querySelectorAll(".filters button");
    const clearDoneBtn = document.getElementById("clear-done-btn");

    let tasks = [];
    let currentFilter = "all"; // all | pending | done

    // Carrega tasks do localStorage
    function loadTasks() {
      const saved = localStorage.getItem("tasks");
      if (saved) {
        tasks = JSON.parse(saved);
      }
      renderTasks();
    }

    // Salva tasks no localStorage
    function saveTasks() {
      localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    // Atualiza contador de pendentes
    function updateCounter() {
      const pending = tasks.filter(t => !t.done).length;
      taskCounter.textContent = `${pending} pendente(s)`;
    }

    // Mostra ou esconde estado vazio
    function updateEmptyState() {
      if (tasks.length === 0) {
        emptyState.style.display = "block";
      } else {
        emptyState.style.display = "none";
      }
    }

    // Renderiza lista de tasks
    function renderTasks() {
      taskList.innerHTML = "";

      const filtered = tasks.filter(task => {
        if (currentFilter === "pending") return !task.done;
        if (currentFilter === "done") return task.done;
        return true;
      });

      filtered.forEach(task => {
        const li = document.createElement("li");
        li.className = "task-item";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.className = "task-checkbox";
        checkbox.checked = task.done;
        checkbox.addEventListener("change", () => toggleTask(task.id));

        const span = document.createElement("span");
        span.className = "task-text" + (task.done ? " done" : "");
        span.textContent = task.text;

        const actions = document.createElement("div");
        actions.className = "task-actions";

        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "Excluir";
        deleteBtn.addEventListener("click", () => deleteTask(task.id));

        actions.appendChild(deleteBtn);

        li.appendChild(checkbox);
        li.appendChild(span);
        li.appendChild(actions);

        taskList.appendChild(li);
      });

      updateCounter();
      updateEmptyState();
    }

    // Adiciona nova task
    function addTask(text) {
      const trimmed = text.trim();
      if (!trimmed) return;

      const newTask = {
        id: Date.now(),
        text: trimmed,
        done: false
      };

      tasks.unshift(newTask);
      saveTasks();
      renderTasks();
    }

    // Alterna concluída/pendente
    function toggleTask(id) {
      tasks = tasks.map(task =>
        task.id === id ? { ...task, done: !task.done } : task
      );
      saveTasks();
      renderTasks();
    }

    // Exclui task
    function deleteTask(id) {
      tasks = tasks.filter(task => task.id !== id);
      saveTasks();
      renderTasks();
    }

    // Limpa tasks concluídas
    function clearDone() {
      tasks = tasks.filter(task => !task.done);
      saveTasks();
      renderTasks();
    }

    // Muda filtro
    function setFilter(filter) {
      currentFilter = filter;
      filterButtons.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.filter === filter);
      });
      renderTasks();
    }

    // Eventos
    taskForm.addEventListener("submit", e => {
      e.preventDefault();
      addTask(taskInput.value);
      taskInput.value = "";
      taskInput.focus();
    });

    filterButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        setFilter(btn.dataset.filter);
      });
    });

    clearDoneBtn.addEventListener("click", clearDone);

    // Inicialização
    loadTasks();
  </script>
</body>
</html>